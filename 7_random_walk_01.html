
    <!DOCTYPE HTML>
    <html>
   <meta charset="utf-8">
    
    <head>
    
    <title>Some rectangles drawn in immediate mode</title>
    
    <style>
        #myCanvas {
            border: 1px solid #9C9898;
        }
        
        #myCanvas {
           background-color: #d0e4fe;
        }
    </style>
    
    
    <script>
        var canvas, ctx;
     
        window.onload = function () {
           canvas = document.getElementById('myCanvas');
           ctx = canvas.getContext('2d');
     
           var grd=ctx.createLinearGradient(0,0,900,0);
		   grd.addColorStop(0,"green");
		   grd.addColorStop(1,"white");
		   ctx.fillStyle=grd;
		   ctx.fillRect(0,0,1000,400);
     
     
          
     
           // A function that automatizes previous drawing
          
           var colorBox = ['red','pink','yellow','cyan']
           for (k =0;k<1000;k++){
          	 	var xi = (Math.random())*1000,yi = (Math.random())*400;
          	    var dx = (Math.random())*100;
          	    var dy = (Math.random())*100;
          	    
          	    
          	     xf = xi+dx,yf = yi+dy;
          	     
          	     
           		drawLine(xi,yi,xf,yf,colorBox[(k%4)] );
           		
          		};
          
          }   
     
     
     
    function drawLine(xi,yi,xf,yf,fillColor) {
        // GOOD PRACTICE: save if the function changes the context
        // or coordinate
        // system
        ctx.save();
     
     
       
      	ctx.beginPath();
      	ctx.moveTo(xi,yi);
      	ctx.lineTo(xf,yf);
      	ctx.strokeStyle = fillColor;
      	ctx.stroke();
     
     
     
     
        // GOOD PRACTICE: a restore for a save!
        ctx.restore();
    }
    
    </script>
    
    
    </head>
    
    
    
    
    
    <body>
         <canvas id="myCanvas" width="1000" height="400">
         </canvas>
    </body>
    </html>